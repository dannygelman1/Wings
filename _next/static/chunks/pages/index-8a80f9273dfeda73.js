(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,a,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return t(2094)}])},2094:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return F}});var n=t(5893),r=t(7294),l=t(5029),s=t(1884),i=t(9365),o=t(9477),c=t(2051);let m=e=>{let{border:a,boidConstants:t,boxOpacity:l,numberBirds:m}=e,{camera:g,gl:p,scene:y}=(0,s.z)(),S=new i.z(g,p.domElement);S.enableDamping=!0,S.rotateSpeed=.01,S.zoomSpeed=0;let b=(0,r.useRef)(null),F=(0,r.useRef)(null);y.add(g),b.current&&g.add(b.current),F.current&&g.add(F.current);let j=(0,r.useRef)(null);(0,r.useEffect)(()=>{y.children.forEach(e=>{var a;e instanceof o.Mesh&&e.geometry instanceof o.ConeGeometry&&(null===(a=e.geometry)||void 0===a||a.rotateX(Math.PI/2))})},[]);let[V,v]=(0,r.useState)(Array.from(Array(m)).map((e,t)=>[o.MathUtils.randFloat(-1*a[0]/2,a[0]/2),o.MathUtils.randFloat(-1*a[1]/2,a[1]/2),o.MathUtils.randFloat(-1*a[2]/2,a[2]/2),o.MathUtils.randFloat(-2,2),o.MathUtils.randFloat(-2,2),o.MathUtils.randFloat(-2,2),d(t,m)||u(t,m)?o.MathUtils.randFloat(4e-5,.01):0,t])),[M,w]=(0,r.useState)(m),[N,C]=(0,r.useState)([0,0,0]),[E,U]=(0,r.useState)(o.MathUtils.randInt(15,40)),[I,k]=(0,r.useState)(0);return(0,r.useEffect)(()=>{let e=e=>{let a=((e.clientX-230)/p.domElement.clientWidth-.5)*p.domElement.clientWidth,t=-((e.clientY-30)/p.domElement.clientHeight-.5)*p.domElement.clientHeight;C([a,t,0])};p.domElement.addEventListener("mousemove",e)},[]),(0,r.useEffect)(()=>{let e=m-V.length;e>0?Array.from(Array(e)).forEach(()=>V.push([o.MathUtils.randFloat(-1*a[0]/2,a[0]/2),o.MathUtils.randFloat(-1*a[1]/2,a[1]/2),o.MathUtils.randFloat(-1*a[2]/2,a[2]/2),o.MathUtils.randFloat(-2,2),o.MathUtils.randFloat(-2,2),o.MathUtils.randFloat(-2,2),0,V.length])):Array.from(Array(-1*e)).forEach(()=>V.pop()),v(V),y.children.forEach((e,a)=>{if(e instanceof o.Mesh&&e.geometry instanceof o.ConeGeometry&&e instanceof o.Mesh&&e.geometry instanceof o.ConeGeometry&&parseInt(e.name)>M){var t;null===(t=e.geometry)||void 0===t||t.rotateX(Math.PI/2)}}),w(y.children.length)},[m,y.children.length]),(0,s.A)(e=>{S.update();let n=new Map,r=2*Math.max(t.protectedRange,t.visualRange),l=V.map((l,s)=>{var i;let m=JSON.stringify([(0,c.Z)(l[0]/r)*r,(0,c.Z)(l[1]/r)*r,(0,c.Z)(l[2]/r)*r]);new Set(Array.from(n.keys())).has(m)?null===(i=n.get(m))||void 0===i||i.push(l):n.set(m,[l]);let d=f([(0,c.Z)(l[0]/r)*r,(0,c.Z)(l[1]/r)*r,(0,c.Z)(l[2]/r)*r],r,l),u=e.clock.getElapsedTime();if((0,c.Z)(u)%10==0&&I!==(0,c.Z)(u)&&(U(o.MathUtils.randInt(15,40)),k((0,c.Z)(u))),l[7]%E==0&&0!==l[7]){let g=x(V,l,t);return g}{let p=h(V,n,d,l,a,t,N,e.clock.getElapsedTime());return p}});v(l)}),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("pointLight",{ref:b,position:[0,.2,4],intensity:.1,color:new o.Color(90,60,0)}),(0,n.jsxs)("mesh",{position:[0,0,0],children:[(0,n.jsx)("boxGeometry",{args:[a[0],a[1],a[2]],ref:j}),(0,n.jsx)("meshStandardMaterial",{color:"gray",opacity:l,transparent:!0,side:o.DoubleSide})]}),V.map((e,a)=>(0,n.jsxs)("mesh",{name:e[7].toString(),position:[e[0],e[1],e[2]],onUpdate(a){a.lookAt(new o.Vector3(e[0]+e[3],e[1]+e[4],e[2]+e[5]))},children:[(0,n.jsx)("coneGeometry",{args:[1,5]}),(0,n.jsx)("meshStandardMaterial",{color:e[7]%E==0?"blue":"red"})]},a))]})},d=(e,a)=>e<a/5,u=(e,a)=>e>a/5&&e<2*a/5,h=(e,a,t,n,r,l,s,i)=>{let c=new o.Vector3(n[0],n[1],n[2]),m=0,h=0,x=0,f=0,g=0,p=0,y=0,S=0,b=0,F=0;for(let j of t)if(new Set(Array.from(a.keys())).has(j)){for(let V of a.get(j)||[])if(V[7]!==n[7]){let v=new o.Vector3(V[0],V[1],V[2]);c.distanceTo(v)<l.visualRange&&(m+=V[0],h+=V[1],x+=V[2],f+=V[3],g+=V[4],p+=V[5],F+=1),c.distanceTo(v)<l.protectedRange&&(y+=c.x-v.x,S+=c.y-v.y,b+=c.z-v.z)}}F>0&&(n[3]+=(m/F-n[0])*l.centeringFactor+(f/F-n[3])*l.matchingFactor,n[4]+=(h/F-n[1])*l.centeringFactor+(g/F-n[4])*l.matchingFactor,n[5]+=(x/F-n[2])*l.centeringFactor+(p/F-n[5])*l.matchingFactor),n[3]+=y*l.avoidFactor,n[4]+=S*l.avoidFactor,n[5]+=b*l.avoidFactor;let M=r[0]/2,w=-1*r[0]/2,N=r[1]/2,C=-1*r[1]/2,E=r[2]/2,U=-1*r[2]/2;n[0]>M&&(n[3]-=l.turnFactor),n[0]<w&&(n[3]+=l.turnFactor),n[1]>N&&(n[4]-=l.turnFactor),n[1]<C&&(n[4]+=l.turnFactor),n[2]>E&&(n[5]-=l.turnFactor),n[2]<U&&(n[5]+=l.turnFactor),d(n[7],e.length)&&(n[3]>0?n[6]=Math.min(l.maxBias,n[6]+l.biasIncrm):n[6]=Math.max(l.biasIncrm,n[6]-l.biasIncrm)),u(n[7],e.length)&&(n[3]<0?n[6]=Math.min(l.maxBias,n[6]+l.biasIncrm):n[6]=Math.max(l.biasIncrm,n[6]-l.biasIncrm)),d(n[7],e.length)&&(n[3]=(1-n[6])*n[3]+n[6]),u(n[7],e.length)&&(n[3]=(1-n[6])*n[3]-n[6]);let I=(n[3]**2+n[4]**2+n[5]**2)**.5;return I<l.minSpeed&&(n[3]=n[3]/I*l.minSpeed,n[4]=n[4]/I*l.minSpeed,n[5]=n[5]/I*l.minSpeed),I>l.maxSpeed&&(n[3]=n[3]/I*l.maxSpeed,n[4]=n[4]/I*l.maxSpeed,n[5]=n[5]/I*l.maxSpeed),n[0]+=n[3],n[1]+=n[4],n[2]+=n[5],n},x=(e,a,t)=>{let n=new o.Vector3(a[0],a[1],a[2]),r=new o.Vector3(a[7]/e.length*100,-200,0),l=n.distanceTo(r);if(l>2&&0!==a[3]&&0!==a[4]&&0!==a[5]){a[3]+=(r.x-n.x)*l,a[4]+=(r.y-n.y)*l,a[5]+=(r.z-n.z)*l;let s=(a[3]**2+a[4]**2+a[5]**2)**.5;s>t.maxSpeed&&(a[3]=a[3]/s*t.maxSpeed,a[4]=a[4]/s*t.maxSpeed,a[5]=a[5]/s*t.maxSpeed),a[0]+=a[3],a[1]+=a[4],a[2]+=a[5]}else a[0]=r.x,a[1]=r.y,a[2]=r.z,a[3]=0,a[4]=0,a[5]=0;return a},f=(e,a,t)=>{let n,r,l;let s=t[0],i=t[1],o=t[2],c=e[0]+a/2,m=e[1]+a/2,d=e[2]+a/2,u=[];return n=s<c?e[0]-a:e[0]+a,r=i<m?e[1]-a:e[1]+a,l=o<d?e[2]-a:e[2]+a,u.push(JSON.stringify([e[0],r,e[2]])),u.push(JSON.stringify([e[0],r,l])),u.push(JSON.stringify([e[0],e[1],e[2]])),u.push(JSON.stringify([e[0],e[1],l])),u.push(JSON.stringify([n,r,e[2]])),u.push(JSON.stringify([n,r,l])),u.push(JSON.stringify([n,e[1],e[2]])),u.push(JSON.stringify([n,e[1],l])),u};var g=t(7090);let p=()=>{let[e,a]=(0,r.useState)([300,180,240]),[t,s]=(0,r.useState)(.4),[i,o]=(0,r.useState)(300),[c,d]=(0,r.useState)({turnfactor:.2,visualRange:40,protectedRange:4,centeringFactor:5e-4,avoidFactor:.05,matchingFactor:.05,maxSpeed:4,minSpeed:2,turnFactor:.2,maxBias:.01,biasIncrm:4e-5});return(0,n.jsxs)("div",{className:"flex flex-row items-center bg-black space-x-4 h-full w-full absolute",children:[(0,n.jsxs)("div",{className:"flex flex-col space-y-4 ml-4 mt-4",children:[(0,n.jsx)(y,{name:"number birds",min:0,max:700,defaultVal:[i],step:1,onValueChange:e=>o(e[0])}),(0,n.jsx)(y,{name:"x boundry",min:30,max:300,defaultVal:[e[0]],step:1,onValueChange:t=>a([t[0],e[1],e[2]])}),(0,n.jsx)(y,{name:"y boundry",min:30,max:300,defaultVal:[e[1]],step:1,onValueChange:t=>a([e[0],t[0],e[2]])}),(0,n.jsx)(y,{name:"z boundry",min:30,max:300,defaultVal:[e[2]],step:1,onValueChange:t=>a([e[0],e[1],t[0]])}),(0,n.jsx)(y,{name:"visual range",min:0,max:60,defaultVal:[c.visualRange],step:1,onValueChange:e=>d({...c,visualRange:e[0]})}),(0,n.jsx)(y,{name:"protected range",min:0,max:20,defaultVal:[c.protectedRange],step:1,onValueChange:e=>d({...c,protectedRange:e[0]})}),(0,n.jsx)(y,{name:"centering factor",min:0,max:.01,defaultVal:[c.centeringFactor],step:1e-4,onValueChange:e=>d({...c,centeringFactor:e[0]})}),(0,n.jsx)(y,{name:"avoid factor",min:0,max:.1,defaultVal:[c.avoidFactor],step:.001,onValueChange:e=>d({...c,avoidFactor:e[0]})}),(0,n.jsx)(y,{name:"matching factor",min:0,max:.1,defaultVal:[c.matchingFactor],step:.001,onValueChange:e=>d({...c,matchingFactor:e[0]})}),(0,n.jsx)(y,{name:"turning factor",min:.1,max:.5,defaultVal:[c.turnFactor],step:.001,onValueChange:e=>d({...c,turnFactor:e[0]})}),(0,n.jsx)(y,{name:"speed range",min:1,max:6,defaultVal:[c.minSpeed,c.maxSpeed],step:.1,onValueChange:e=>d({...c,minSpeed:e[0],maxSpeed:e[1]})}),(0,n.jsx)(y,{name:"bias range",min:0,max:.03,defaultVal:[c.biasIncrm,c.maxBias],step:1e-5,onValueChange:e=>d({...c,biasIncrm:e[0],maxBias:e[1]})}),(0,n.jsx)(y,{name:"box opacity",min:0,max:1,defaultVal:[t],step:.01,onValueChange:e=>s(e[0])})]}),(0,n.jsx)("div",{className:"w-4/5 h-[700px] bg-black",children:(0,n.jsx)(l.Xz,{shadows:!0,camera:{fov:75,position:[0,0,Math.max(e[0],e[1],e[2])]},className:"bg-blue-400",children:(0,n.jsx)(m,{border:e,boidConstants:c,boxOpacity:t,numberBirds:i})})})]})},y=e=>{let{min:a,max:t,defaultVal:r,step:l,name:s,onValueChange:i}=e;return(0,n.jsxs)("div",{className:"flex flex-col space-y-1",children:[(0,n.jsx)("span",{className:"text-white select-none",children:s}),(0,n.jsxs)(g.fC,{className:"relative select-none touch-none flex items-center w-[200px] h-2",minStepsBetweenThumbs:1,defaultValue:r,min:a,max:t,onValueCommit:i,step:l,"aria-label":"Volume",children:[(0,n.jsx)(g.fQ,{className:"relative bg-white rounded-full h-2 flex-grow",children:(0,n.jsx)(g.e6,{className:"absolute bg-green-500 rounded-full h-full"})}),r.map(e=>(0,n.jsx)(g.bU,{className:"block w-5 h-5 bg-green-500 rounded-full outline-none "},e))]})]})};var S=t(9008),b=t.n(S);function F(){return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(b(),{children:[(0,n.jsx)("title",{children:"Create Next App"}),(0,n.jsx)("meta",{name:"description",content:"Generated by create next app"}),(0,n.jsx)("link",{rel:"icon",href:"/Wings/favicon.ico"})]}),(0,n.jsx)(p,{})]})}}},function(e){e.O(0,[737,515,774,888,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);
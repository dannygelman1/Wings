(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,a,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return t(2094)}])},2094:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return y}});var n=t(5893),r=t(7294),s=t(5029),l=t(1884),i=t(9365),o=t(9477),c=t(2051);let m=e=>{let{border:a,boidConstants:t,boxOpacity:s,numberBirds:m}=e,{camera:f,gl:p,scene:g}=(0,l.z)(),F=new i.z(f,p.domElement);F.enableDamping=!0,F.rotateSpeed=.01,F.zoomSpeed=.001;let j=(0,r.useRef)(null),y=(0,r.useRef)(null);g.add(f),j.current&&f.add(j.current),y.current&&f.add(y.current);let b=(0,r.useRef)(null);(0,r.useEffect)(()=>{g.children.forEach(e=>{var a;e instanceof o.Mesh&&e.geometry instanceof o.ConeGeometry&&(null===(a=e.geometry)||void 0===a||a.rotateX(Math.PI/2))})},[]),(0,l.A)(()=>{F.update()});let[S,V]=(0,r.useState)(Array.from(Array(m)).map((e,t)=>[o.MathUtils.randFloat(-1*a[0]/2,a[0]/2),o.MathUtils.randFloat(-1*a[1]/2,a[1]/2),o.MathUtils.randFloat(-1*a[2]/2,a[2]/2),o.MathUtils.randFloat(-2,2),o.MathUtils.randFloat(-2,2),o.MathUtils.randFloat(-2,2),u(t,m)||d(t,m)?o.MathUtils.randFloat(4e-5,.01):0,t]));return(0,r.useEffect)(()=>{let e=m-S.length;e>0?Array.from(Array(e)).forEach(()=>S.push([o.MathUtils.randFloat(-1*a[0]/2,a[0]/2),o.MathUtils.randFloat(-1*a[1]/2,a[1]/2),o.MathUtils.randFloat(-1*a[2]/2,a[2]/2),o.MathUtils.randFloat(-2,2),o.MathUtils.randFloat(-2,2),o.MathUtils.randFloat(-2,2),0,S.length])):Array.from(Array(-1*e)).forEach(()=>S.pop()),V(S)},[m]),(0,l.A)(()=>{let e=new Map,n=2*Math.max(t.protectedRange,t.visualRange),r=S.map((r,s)=>{var l;let i=JSON.stringify([(0,c.Z)(r[0]/n)*n,(0,c.Z)(r[1]/n)*n,(0,c.Z)(r[2]/n)*n]);new Set(Array.from(e.keys())).has(i)?null===(l=e.get(i))||void 0===l||l.push(r):e.set(i,[r]);let o=x([(0,c.Z)(r[0]/n)*n,(0,c.Z)(r[1]/n)*n,(0,c.Z)(r[2]/n)*n],n,r),m=h(S,e,o,r,a,t);return m});V(r)}),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("pointLight",{ref:j,position:[0,.2,4],intensity:.1,color:new o.Color(90,60,0)}),(0,n.jsx)("directionalLight",{ref:y,position:[0,4,0],intensity:.5,castShadow:!0}),(0,n.jsxs)("mesh",{position:[0,0,0],children:[(0,n.jsx)("boxGeometry",{args:[a[0],a[1],a[2]],ref:b}),(0,n.jsx)("meshStandardMaterial",{color:"gray",opacity:s,transparent:!0,wireframeLinejoin:"round",side:o.DoubleSide})]}),S.map((e,a)=>(0,n.jsxs)("mesh",{position:[e[0],e[1],e[2]],onUpdate(a){a.lookAt(new o.Vector3(e[0]+e[3],e[1]+e[4],e[2]+e[5]))},children:[(0,n.jsx)("coneGeometry",{args:[1,5]}),(0,n.jsx)("meshStandardMaterial",{color:"green"})]},a))]})},u=(e,a)=>e<a/5,d=(e,a)=>e>a/5&&e<2*a/5,h=(e,a,t,n,r,s)=>{let l=new o.Vector3(n[0],n[1],n[2]),i=0,c=0,m=0,h=0,x=0,f=0,p=0,g=0,F=0,j=0;for(let y of t)if(new Set(Array.from(a.keys())).has(y)){for(let b of a.get(y)||[])if(b[7]!==n[7]){let S=new o.Vector3(b[0],b[1],b[2]);l.distanceTo(S)<s.visualRange&&(i+=b[0],c+=b[1],m+=b[2],h+=b[3],x+=b[4],f+=b[5],j+=1),l.distanceTo(S)<s.protectedRange&&(p+=l.x-S.x,g+=l.y-S.y,F+=l.z-S.z)}}j>0&&(n[3]+=(i/j-n[0])*s.centeringFactor+(h/j-n[3])*s.matchingFactor,n[4]+=(c/j-n[1])*s.centeringFactor+(x/j-n[4])*s.matchingFactor,n[5]+=(m/j-n[2])*s.centeringFactor+(f/j-n[5])*s.matchingFactor),n[3]+=p*s.avoidFactor,n[4]+=g*s.avoidFactor,n[5]+=F*s.avoidFactor;let V=r[0]/2,v=-1*r[0]/2,M=r[1]/2,w=-1*r[1]/2,N=r[2]/2,C=-1*r[2]/2;n[0]>V&&(n[3]-=s.turnFactor),n[0]<v&&(n[3]+=s.turnFactor),n[1]>M&&(n[4]-=s.turnFactor),n[1]<w&&(n[4]+=s.turnFactor),n[2]>N&&(n[5]-=s.turnFactor),n[2]<C&&(n[5]+=s.turnFactor),u(n[7],e.length)&&(n[3]>0?n[6]=Math.min(s.maxBias,n[6]+s.biasIncrm):n[6]=Math.max(s.biasIncrm,n[6]-s.biasIncrm)),d(n[7],e.length)&&(n[3]<0?n[6]=Math.min(s.maxBias,n[6]+s.biasIncrm):n[6]=Math.max(s.biasIncrm,n[6]-s.biasIncrm)),u(n[7],e.length)&&(n[3]=(1-n[6])*n[3]+n[6]),d(n[7],e.length)&&(n[3]=(1-n[6])*n[3]-n[6]);let U=(n[3]**2+n[4]**2+n[5]**2)**.5;return U<s.minSpeed&&(n[3]=n[3]/U*s.minSpeed,n[4]=n[4]/U*s.minSpeed,n[5]=n[5]/U*s.minSpeed),U>s.maxSpeed&&(n[3]=n[3]/U*s.maxSpeed,n[4]=n[4]/U*s.maxSpeed,n[5]=n[5]/U*s.maxSpeed),n[0]+=n[3],n[1]+=n[4],n[2]+=n[5],n},x=(e,a,t)=>{let n,r,s;let l=t[0],i=t[1],o=t[2],c=e[0]+a/2,m=e[1]+a/2,u=e[2]+a/2,d=[];return n=l<c?e[0]-a:e[0]+a,r=i<m?e[1]-a:e[1]+a,s=o<u?e[2]-a:e[2]+a,d.push(JSON.stringify([e[0],r,e[2]])),d.push(JSON.stringify([e[0],r,s])),d.push(JSON.stringify([e[0],e[1],e[2]])),d.push(JSON.stringify([e[0],e[1],s])),d.push(JSON.stringify([n,r,e[2]])),d.push(JSON.stringify([n,r,s])),d.push(JSON.stringify([n,e[1],e[2]])),d.push(JSON.stringify([n,e[1],s])),d};var f=t(7090);let p=()=>{let[e,a]=(0,r.useState)([300,180,240]),[t,l]=(0,r.useState)(.4),[i,o]=(0,r.useState)(300),[c,u]=(0,r.useState)({turnfactor:.2,visualRange:40,protectedRange:4,centeringFactor:5e-4,avoidFactor:.05,matchingFactor:.05,maxSpeed:4,minSpeed:2,turnFactor:.2,maxBias:.01,biasIncrm:4e-5});return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"w-full h-full h-grow bg-black absolute",children:(0,n.jsx)(s.Xz,{shadows:!0,camera:{fov:50,position:[Math.max(e[0],e[1],e[2]),Math.max(e[0],e[1],e[2]),Math.max(e[0],e[1],e[2])]},children:(0,n.jsx)(m,{border:e,boidConstants:c,boxOpacity:t,numberBirds:i})})}),(0,n.jsxs)("div",{className:"absolute flex flex-col space-y-4 ml-4 mt-4",children:[(0,n.jsx)(g,{name:"number birds",min:0,max:700,defaultVal:[i],step:1,onValueChange:e=>o(e[0])}),(0,n.jsx)(g,{name:"x boundry",min:30,max:300,defaultVal:[e[0]],step:1,onValueChange:t=>a([t[0],e[1],e[2]])}),(0,n.jsx)(g,{name:"y boundry",min:30,max:300,defaultVal:[e[1]],step:1,onValueChange:t=>a([e[0],t[0],e[2]])}),(0,n.jsx)(g,{name:"z boundry",min:30,max:300,defaultVal:[e[2]],step:1,onValueChange:t=>a([e[0],e[1],t[0]])}),(0,n.jsx)(g,{name:"visual range",min:0,max:60,defaultVal:[c.visualRange],step:1,onValueChange:e=>u({...c,visualRange:e[0]})}),(0,n.jsx)(g,{name:"protected range",min:0,max:20,defaultVal:[c.protectedRange],step:1,onValueChange:e=>u({...c,protectedRange:e[0]})}),(0,n.jsx)(g,{name:"centering factor",min:0,max:.01,defaultVal:[c.centeringFactor],step:1e-4,onValueChange:e=>u({...c,centeringFactor:e[0]})}),(0,n.jsx)(g,{name:"avoid factor",min:0,max:.1,defaultVal:[c.avoidFactor],step:.001,onValueChange:e=>u({...c,avoidFactor:e[0]})}),(0,n.jsx)(g,{name:"matching factor",min:0,max:.1,defaultVal:[c.matchingFactor],step:.001,onValueChange:e=>u({...c,matchingFactor:e[0]})}),(0,n.jsx)(g,{name:"turning factor",min:.1,max:.5,defaultVal:[c.turnFactor],step:.001,onValueChange:e=>u({...c,turnFactor:e[0]})}),(0,n.jsx)(g,{name:"speed range",min:1,max:6,defaultVal:[c.minSpeed,c.maxSpeed],step:.1,onValueChange:e=>u({...c,minSpeed:e[0],maxSpeed:e[1]})}),(0,n.jsx)(g,{name:"bias range",min:0,max:.03,defaultVal:[c.biasIncrm,c.maxBias],step:1e-5,onValueChange:e=>u({...c,biasIncrm:e[0],maxBias:e[1]})}),(0,n.jsx)(g,{name:"box opacity",min:0,max:1,defaultVal:[t],step:.01,onValueChange:e=>l(e[0])})]})]})},g=e=>{let{min:a,max:t,defaultVal:r,step:s,name:l,onValueChange:i}=e;return(0,n.jsxs)("div",{className:"flex flex-col space-y-1",children:[(0,n.jsx)("span",{className:"text-white select-none",children:l}),(0,n.jsxs)(f.fC,{className:"relative select-none touch-none flex items-center w-[200px] h-2",minStepsBetweenThumbs:1,defaultValue:r,min:a,max:t,onValueCommit:i,step:s,"aria-label":"Volume",children:[(0,n.jsx)(f.fQ,{className:"relative bg-white rounded-full h-2 flex-grow",children:(0,n.jsx)(f.e6,{className:"absolute bg-green-500 rounded-full h-full"})}),r.map(e=>(0,n.jsx)(f.bU,{className:"block w-5 h-5 bg-green-500 rounded-full outline-none "},e))]})]})};var F=t(9008),j=t.n(F);function y(){return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(j(),{children:[(0,n.jsx)("title",{children:"Create Next App"}),(0,n.jsx)("meta",{name:"description",content:"Generated by create next app"}),(0,n.jsx)("link",{rel:"icon",href:"/Wings/favicon.ico"})]}),(0,n.jsx)(p,{})]})}}},function(e){e.O(0,[737,515,774,888,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);
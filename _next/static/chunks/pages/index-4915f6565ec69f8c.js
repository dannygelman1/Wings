(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return a(2094)}])},2094:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return b}});var n=a(5893),r=a(7294),l=a(5029),s=a(1884),o=a(9365),i=a(9477),c=a(2051),h=a(8243);let m=e=>{let{border:t,boidConstants:a,boxOpacity:l,numberBirds:m}=e,{camera:f,gl:M,scene:I}=(0,s.z)(),y=new o.z(f,M.domElement);y.enableDamping=!0,y.rotateSpeed=.01,y.zoomSpeed=.001,y.target.set(0,0,0),f.position.set(f.position.x,0,f.position.z),f.lookAt(y.target),y.minPolarAngle=0,y.maxPolarAngle=180,y.target.set(0,0,0);let S=(0,r.useRef)(null),b=(0,r.useRef)(null);I.add(f),S.current&&f.add(S.current),b.current&&f.add(b.current);let F=(0,r.useRef)(null);(0,r.useEffect)(()=>{I.children.forEach(e=>{var t;e instanceof i.Mesh&&e.geometry instanceof i.ConeGeometry&&(null===(t=e.geometry)||void 0===t||t.rotateX(Math.PI/2))})},[]);let[P,j]=(0,r.useState)(Array.from(Array(m)).map((e,a)=>[i.MathUtils.randFloat(-1*t[0]/2,t[0]/2),i.MathUtils.randFloat(-1*t[1]/2,t[1]/2),i.MathUtils.randFloat(-1*t[2]/2,t[2]/2),i.MathUtils.randFloat(-2,2),i.MathUtils.randFloat(-2,2),i.MathUtils.randFloat(-2,2),d(a,m)||u(a,m)?i.MathUtils.randFloat(4e-5,.01):0,a,0,i.MathUtils.randFloat(10/3,10),0,-1])),[V,w]=(0,r.useState)(m),[v,E]=(0,r.useState)([0,0,0]),[C,N]=(0,r.useState)(i.MathUtils.randInt(15,40)),[U,k]=(0,r.useState)(0);(0,r.useEffect)(()=>{let e=e=>{let t=((e.clientX-230)/M.domElement.clientWidth-.5)*M.domElement.clientWidth,a=-((e.clientY-30)/M.domElement.clientHeight-.5)*M.domElement.clientHeight;E([t,a,0])};M.domElement.addEventListener("mousemove",e)},[]),(0,r.useEffect)(()=>{let e=m-P.length;e>0?Array.from(Array(e)).forEach(()=>P.push([i.MathUtils.randFloat(-1*t[0]/2,t[0]/2),i.MathUtils.randFloat(-1*t[1]/2,t[1]/2),i.MathUtils.randFloat(-1*t[2]/2,t[2]/2),i.MathUtils.randFloat(-2,2),i.MathUtils.randFloat(-2,2),i.MathUtils.randFloat(-2,2),0,P.length,0,i.MathUtils.randFloat(10/3,10),0,-1])):Array.from(Array(-1*e)).forEach(()=>P.pop()),j(P),I.children.forEach((e,t)=>{if(e instanceof i.Mesh&&e.geometry instanceof i.ConeGeometry&&e instanceof i.Mesh&&e.geometry instanceof i.ConeGeometry&&parseInt(e.name)>V){var a;null===(a=e.geometry)||void 0===a||a.rotateX(Math.PI/2)}}),w(I.children.length)},[m,I.children.length]);let A=e=>{j(P.map(t=>t[7]===e[7]?e:t))};return(0,s.A)(e=>{y.update();let n=new Map,r=2*Math.max(a.protectedRange,a.visualRange),l=P.map((l,s)=>{var o;let h=JSON.stringify([(0,c.Z)(l[0]/r)*r,(0,c.Z)(l[1]/r)*r,(0,c.Z)(l[2]/r)*r]);new Set(Array.from(n.keys())).has(h)?null===(o=n.get(h))||void 0===o||o.push(l):n.set(h,[l]);let m=x([(0,c.Z)(l[0]/r)*r,(0,c.Z)(l[1]/r)*r,(0,c.Z)(l[2]/r)*r],r,l),d=e.clock.getElapsedTime();if((0,c.Z)(d)%10==0&&U!==(0,c.Z)(d)&&(N(i.MathUtils.randInt(15,40)),k((0,c.Z)(d))),l[7]%C==0&&0!==l[7]&&(d<l[9]+l[10]||0===l[10])){let u=p(P,l,a,d);return u}{let f=g(P,n,m,l,t,a,v,e.clock.getElapsedTime());return f}});j(l)}),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("pointLight",{ref:S,position:[0,.2,4],intensity:.1,color:new i.Color(90,60,0)}),(0,n.jsxs)("mesh",{position:[0,0,0],children:[(0,n.jsx)("boxGeometry",{args:[t[0],t[1],t[2]],ref:F}),(0,n.jsx)("meshStandardMaterial",{color:"gray",opacity:l,transparent:!0,side:i.DoubleSide})]}),P.map((e,t)=>(0,n.jsxs)("mesh",{name:e[7].toString(),position:[e[0],e[1],e[2]],onUpdate(t){t.lookAt(new i.Vector3(e[0]+e[3],e[1]+e[4],e[2]+e[5]))},children:[(0,n.jsx)("coneGeometry",{args:[1,5],onUpdate(t){let a;let n=new i.Vector3(e[0],e[1],e[2]);if(0===e[11])a=new i.Vector3(50*Math.cos(-(Math.PI-2*Math.PI/8)*(e[7]/P.length)-Math.PI/8),-148+10*Math.sin(-(Math.PI-2*Math.PI/8)*(e[7]/P.length)-Math.PI/8),0);else{let r=new i.Euler(0,Math.PI/3,0);a=new i.Vector3(150*Math.cos(-(Math.PI-2*Math.PI/8)*(e[7]/P.length)-Math.PI/8),-98+40*Math.sin(-(Math.PI-2*Math.PI/8)*(e[7]/P.length)-Math.PI/8),0).applyEuler(r)}let l=n.distanceTo(a);2===e[8]&&l>5&&(t.rotateX(Math.PI/2),e[8]=0,A(e)),e[7]%C==0&&1===e[8]&&(t.rotateX(-Math.PI/2),e[8]=2,A(e))}}),(0,n.jsx)("meshStandardMaterial",{color:"blue"})]},t)),(0,n.jsx)(h.x,{points:new i.EllipseCurve(0,-150,50,10,Math.PI+Math.PI/8,0-Math.PI/8,!1,0).getPoints(50),color:"blue",lineWidth:1}),(0,n.jsx)(h.x,{points:new i.EllipseCurve(0,-100,150,40,Math.PI+Math.PI/8,0-Math.PI/8,!1,0).getPoints(50),color:"blue",lineWidth:1,rotation:new i.Euler(0,Math.PI/3,0)})]})},d=(e,t)=>e<t/5,u=(e,t)=>e>t/5&&e<2*t/5,g=(e,t,a,n,r,l,s,o)=>{let c=new i.Vector3(n[0],n[1],n[2]),h=0,m=0,g=0,p=0,x=0,f=0,M=0,I=0,y=0,S=0;for(let b of a)if(new Set(Array.from(t.keys())).has(b)){for(let F of t.get(b)||[])if(F[7]!==n[7]){let P=new i.Vector3(F[0],F[1],F[2]);c.distanceTo(P)<l.visualRange&&(h+=F[0],m+=F[1],g+=F[2],p+=F[3],x+=F[4],f+=F[5],S+=1),c.distanceTo(P)<l.protectedRange&&(M+=c.x-P.x,I+=c.y-P.y,y+=c.z-P.z)}}S>0&&(n[3]+=(h/S-n[0])*l.centeringFactor+(p/S-n[3])*l.matchingFactor,n[4]+=(m/S-n[1])*l.centeringFactor+(x/S-n[4])*l.matchingFactor,n[5]+=(g/S-n[2])*l.centeringFactor+(f/S-n[5])*l.matchingFactor),n[3]+=M*l.avoidFactor,n[4]+=I*l.avoidFactor,n[5]+=y*l.avoidFactor;let j=r[0]/2,V=-1*r[0]/2,w=r[1]/2,v=-1*r[1]/2,E=r[2]/2,C=-1*r[2]/2;n[0]>j&&(n[3]-=l.turnFactor),n[0]<V&&(n[3]+=l.turnFactor),n[1]>w&&(n[4]-=l.turnFactor),n[1]<v&&(n[4]+=l.turnFactor),n[2]>E&&(n[5]-=l.turnFactor),n[2]<C&&(n[5]+=l.turnFactor),d(n[7],e.length)&&(n[3]>0?n[6]=Math.min(l.maxBias,n[6]+l.biasIncrm):n[6]=Math.max(l.biasIncrm,n[6]-l.biasIncrm)),u(n[7],e.length)&&(n[3]<0?n[6]=Math.min(l.maxBias,n[6]+l.biasIncrm):n[6]=Math.max(l.biasIncrm,n[6]-l.biasIncrm)),d(n[7],e.length)&&(n[3]=(1-n[6])*n[3]+n[6]),u(n[7],e.length)&&(n[3]=(1-n[6])*n[3]-n[6]);let N=(n[3]**2+n[4]**2+n[5]**2)**.5;return N<l.minSpeed&&(n[3]=n[3]/N*l.minSpeed,n[4]=n[4]/N*l.minSpeed,n[5]=n[5]/N*l.minSpeed),N>l.maxSpeed&&(n[3]=n[3]/N*l.maxSpeed,n[4]=n[4]/N*l.maxSpeed,n[5]=n[5]/N*l.maxSpeed),n[0]+=n[3],n[1]+=n[4],n[2]+=n[5],n},p=(e,t,a,n)=>{let r,l;r=-1===t[11]?i.MathUtils.randInt(0,1):t[11];let s=new i.Vector3(t[0],t[1],t[2]);if(0===r)l=new i.Vector3(50*Math.cos(-(Math.PI-2*Math.PI/8)*(t[7]/e.length)-Math.PI/8),-148+10*Math.sin(-(Math.PI-2*Math.PI/8)*(t[7]/e.length)-Math.PI/8),0);else{let o=new i.Euler(0,Math.PI/3,0);l=new i.Vector3(150*Math.cos(-(Math.PI-2*Math.PI/8)*(t[7]/e.length)-Math.PI/8),-98+40*Math.sin(-(Math.PI-2*Math.PI/8)*(t[7]/e.length)-Math.PI/8),0).applyEuler(o)}let c=s.distanceTo(l);if(c>2&&0!==t[3]&&0!==t[4]&&0!==t[5]){t[3]+=(l.x-s.x)*c,t[4]+=(l.y-s.y)*c,t[5]+=(l.z-s.z)*c;let h=(t[3]**2+t[4]**2+t[5]**2)**.5;h>a.maxSpeed&&(t[3]=t[3]/h*a.maxSpeed,t[4]=t[4]/h*a.maxSpeed,t[5]=t[5]/h*a.maxSpeed),t[0]+=t[3],t[1]+=t[4],t[2]+=t[5]}else t[0]=l.x,t[1]=l.y,t[2]=l.z,t[3]=0,t[4]=0,t[5]=0,0===t[8]&&(t[8]=1,t[10]=n);return t[11]=r,t},x=(e,t,a)=>{let n,r,l;let s=a[0],o=a[1],i=a[2],c=e[0]+t/2,h=e[1]+t/2,m=e[2]+t/2,d=[];return n=s<c?e[0]-t:e[0]+t,r=o<h?e[1]-t:e[1]+t,l=i<m?e[2]-t:e[2]+t,d.push(JSON.stringify([e[0],r,e[2]])),d.push(JSON.stringify([e[0],r,l])),d.push(JSON.stringify([e[0],e[1],e[2]])),d.push(JSON.stringify([e[0],e[1],l])),d.push(JSON.stringify([n,r,e[2]])),d.push(JSON.stringify([n,r,l])),d.push(JSON.stringify([n,e[1],e[2]])),d.push(JSON.stringify([n,e[1],l])),d};var f=a(7090);let M=()=>{let[e,t]=(0,r.useState)([300,180,240]),[a,s]=(0,r.useState)(0),[o,i]=(0,r.useState)(300),[c,h]=(0,r.useState)({turnfactor:.2,visualRange:40,protectedRange:4,centeringFactor:5e-4,avoidFactor:.05,matchingFactor:.05,maxSpeed:4,minSpeed:2,turnFactor:.2,maxBias:.01,biasIncrm:4e-5});return(0,n.jsxs)("div",{className:"flex flex-row items-center bg-black space-x-4 h-full w-full absolute",children:[(0,n.jsxs)("div",{className:"flex flex-col space-y-4 ml-4 mt-4",children:[(0,n.jsx)(I,{name:"number birds",min:0,max:700,defaultVal:[o],step:1,onValueChange:e=>i(e[0])}),(0,n.jsx)(I,{name:"x boundry",min:30,max:300,defaultVal:[e[0]],step:1,onValueChange:a=>t([a[0],e[1],e[2]])}),(0,n.jsx)(I,{name:"y boundry",min:30,max:300,defaultVal:[e[1]],step:1,onValueChange:a=>t([e[0],a[0],e[2]])}),(0,n.jsx)(I,{name:"z boundry",min:30,max:300,defaultVal:[e[2]],step:1,onValueChange:a=>t([e[0],e[1],a[0]])}),(0,n.jsx)(I,{name:"visual range",min:0,max:60,defaultVal:[c.visualRange],step:1,onValueChange:e=>h({...c,visualRange:e[0]})}),(0,n.jsx)(I,{name:"protected range",min:0,max:20,defaultVal:[c.protectedRange],step:1,onValueChange:e=>h({...c,protectedRange:e[0]})}),(0,n.jsx)(I,{name:"centering factor",min:0,max:.01,defaultVal:[c.centeringFactor],step:1e-4,onValueChange:e=>h({...c,centeringFactor:e[0]})}),(0,n.jsx)(I,{name:"avoid factor",min:0,max:.1,defaultVal:[c.avoidFactor],step:.001,onValueChange:e=>h({...c,avoidFactor:e[0]})}),(0,n.jsx)(I,{name:"matching factor",min:0,max:.1,defaultVal:[c.matchingFactor],step:.001,onValueChange:e=>h({...c,matchingFactor:e[0]})}),(0,n.jsx)(I,{name:"turning factor",min:.1,max:.5,defaultVal:[c.turnFactor],step:.001,onValueChange:e=>h({...c,turnFactor:e[0]})}),(0,n.jsx)(I,{name:"speed range",min:1,max:6,defaultVal:[c.minSpeed,c.maxSpeed],step:.1,onValueChange:e=>h({...c,minSpeed:e[0],maxSpeed:e[1]})}),(0,n.jsx)(I,{name:"bias range",min:0,max:.03,defaultVal:[c.biasIncrm,c.maxBias],step:1e-5,onValueChange:e=>h({...c,biasIncrm:e[0],maxBias:e[1]})}),(0,n.jsx)(I,{name:"box opacity",min:0,max:1,defaultVal:[a],step:.01,onValueChange:e=>s(e[0])})]}),(0,n.jsx)("div",{className:"w-4/5 h-[700px] bg-black",children:(0,n.jsx)(l.Xz,{shadows:!0,camera:{fov:75,position:[0,0,Math.max(e[0],e[1],e[2])]},className:"bg-blue-400",children:(0,n.jsx)(m,{border:e,boidConstants:c,boxOpacity:a,numberBirds:o})})})]})},I=e=>{let{min:t,max:a,defaultVal:r,step:l,name:s,onValueChange:o}=e;return(0,n.jsxs)("div",{className:"flex flex-col space-y-1",children:[(0,n.jsx)("span",{className:"text-white select-none",children:s}),(0,n.jsxs)(f.fC,{className:"relative select-none touch-none flex items-center w-[200px] h-2",minStepsBetweenThumbs:1,defaultValue:r,min:t,max:a,onValueCommit:o,step:l,"aria-label":"Volume",children:[(0,n.jsx)(f.fQ,{className:"relative bg-white rounded-full h-2 flex-grow",children:(0,n.jsx)(f.e6,{className:"absolute bg-green-500 rounded-full h-full"})}),r.map(e=>(0,n.jsx)(f.bU,{className:"block w-5 h-5 bg-green-500 rounded-full outline-none "},e))]})]})};var y=a(9008),S=a.n(y);function b(){return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(S(),{children:[(0,n.jsx)("title",{children:"Create Next App"}),(0,n.jsx)("meta",{name:"description",content:"Generated by create next app"}),(0,n.jsx)("link",{rel:"icon",href:"/Wings/favicon.ico"})]}),(0,n.jsx)(M,{})]})}}},function(e){e.O(0,[737,962,774,888,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);